# `PromissoryNote`

Built off Openzeppelin's [ERC721PresetMinterPauserAutoId](https://docs.openzeppelin.com/contracts/3.x/api/presets#ERC721PresetMinterPauserAutoId).

ERC721 token, including:

- ability for holders to burn (destroy) their tokens
- a minter role that allows for token minting (creation)
- token ID and URI autogeneration

This contract uses [AccessControl](https://docs.openzeppelin.com/contracts/4.x/api/access#AccessControl)
to lock permissioned functions using the different roles - head to its documentation for details.

The account that deploys the contract will be granted the minter and pauser
roles, as well as the default admin role, which will let it grant both minter
and pauser roles to other accounts.

`PromissoryNote` instances for both the lender and borrower notes should be deployed
when an instance of `LoanCore` is deployed.

## API

### `constructor(string name, string symbol)`

Creates the borrowor note contract linked to a specific `LoanCore` instance.
The loan core reference is non-upgradeable. Passes `name` and `symbol` to the
`ERC721` constructor.

Grants `PAUSER_ROLE`, `MINTER_ROLE`, and `BURNER_ROLE` to the sender
contract, provided it is an instance of LoanCore.

### `mint(address to)` _(external)_

Creates a new token for `to`. Its token ID will be automatically
assigned (and available on the emitted `IERC721-Transfer` event), and the token
URI autogenerated based on the base URI passed at construction.

See [ERC721-\_mint](https://docs.openzeppelin.com/contracts/4.x/api/token/erc721#ERC721-_mint-address-uint256-).

Requirements:

- the caller must have the `MINTER_ROLE`.

### `burn(uint256 tokenId)` _(external)_

Burns `tokenId`. See [ERC721-\_burn](https://docs.openzeppelin.com/contracts/4.x/api/token/erc721#ERC721-_burn-uint256-).

Requirements:

- The caller must own `tokenId` or be an approved operator.
  The loan core contract can only burn a loan that is finished:
  either repaid or claimed.

### `supportsInterface(bytes4 interfaceId) â†’ bool` _(public)_

Override of `supportsInterface` for `AccessControlEnumerable`, `ERC721`, `ERC721Enumerable`.

See [IERC165-supportsInterface](https://docs.openzeppelin.com/contracts/4.x/api/utils#IERC165-supportsInterface-bytes4-).

### `_beforeTokenTransfer(address from, address to, uint256 amount)` _(internal)_

override of `_beforeTokenTransfer` for `ERC721`, `ERC721Enumerable`, `ERC721Pausable`.

See [IERC721-\_beforeTokenTransfer](https://docs.openzeppelin.com/contracts/4.x/api/token/erc721#ERC721-_beforeTokenTransfer-address-address-uint256-).
